<section class="auth">
    <div class="auth__card">
        <header class="auth__header">
            <h1>Connexion</h1>
            <p class="auth__subtitle">
                Pas encore de compte ?
                <a routerLink="/auth/register" class="auth__link">Créer un compte</a>
            </p>
        </header>

        <form class="auth__form" [formGroup]="form" (ngSubmit)="onSubmit()" aria-describedby="auth-form-description"
            aria-live="polite" novalidate>
            <p id="auth-form-description" class="visually-hidden">
                Tous les champs sont obligatoires sauf indication contraire.
            </p>

            <div class="form-field">
                <label for="email">Adresse e-mail</label>
                <input id="email" type="email" formControlName="email" autocomplete="email"
                    [class.form-field__input--invalid]="canShowEmailError()" [attr.aria-invalid]="canShowEmailError()"
                    [attr.aria-describedby]="canShowEmailError() ? 'email-error' : null" />
                @if (canShowEmailError()) {
                <p id="email-error" class="form-field__error">{{ getEmailErrorMessage() }}</p>
                }
            </div>

            <div class="form-field">
                <label for="password">Mot de passe</label>
                <input id="password" type="password" formControlName="password" autocomplete="current-password"
                    [class.form-field__input--invalid]="canShowPasswordError()"
                    [attr.aria-invalid]="canShowPasswordError()"
                    [attr.aria-describedby]="canShowPasswordError() ? 'password-error' : null" />
                @if (canShowPasswordError()) {
                <p id="password-error" class="form-field__error">{{ getPasswordErrorMessage() }}</p>
                }
            </div>

            <div class="form-row form-row--checkbox">
                <label class="checkbox">
                    <input type="checkbox" formControlName="rememberMe" />
                    <span>Se souvenir de moi</span>
                </label>
            </div>

            <button type="submit" class="auth__submit" [disabled]="submissionInProgress()"
                [attr.aria-busy]="submissionInProgress()">
                @if (submissionInProgress()) {
                <span>Connexion…</span>
                } @else {
                <span>Se connecter</span>
                }
            </button>
        </form>
    </div>
</section>