<section class="auth">
  <div class="auth__card">
    <header class="auth__header">
      <h1>{{ title() }}</h1>
      <p class="auth__subtitle">
        {{ subtitle() }}
        <a routerLink="/auth/register" class="auth__link">{{ createAccountLink() }}</a>
      </p>
    </header>

    <form class="auth__form" [formGroup]="form" (ngSubmit)="onSubmit()" aria-describedby="auth-form-description"
      aria-live="polite" novalidate>
      <p id="auth-form-description" class="visually-hidden">
        {{ formDescription() }}
      </p>

      <div class="form-field">
        <label for="email">{{ emailLabel() }}</label>
        <input id="email" type="email" formControlName="email" autocomplete="email"
          [class.form-field__input--invalid]="canShowFormError()" [attr.aria-invalid]="canShowFormError()"
          [attr.aria-describedby]="canShowFormError() ? 'form-error' : null" />
      </div>

      <div class="form-field">
        <label for="password">{{ passwordLabel() }}</label>
        <input id="password" type="password" formControlName="password" autocomplete="current-password"
          [class.form-field__input--invalid]="canShowFormError()" [attr.aria-invalid]="canShowFormError()"
          [attr.aria-describedby]="canShowFormError() ? 'form-error' : null" />
      </div>

      @if (canShowFormError()) {
      <p id="form-error" class="form-field__error">{{ getFormErrorMessage() }}</p>
      }

      <div class="form-row form-row--between">
        <label class="checkbox">
          <input type="checkbox" formControlName="rememberMe" />
          <span>{{ rememberMeLabel() }}</span>
        </label>
        <a routerLink="/auth/forgot-password" class="auth__link auth__link--small">{{ forgotPasswordLink()
          }}</a>
      </div>

      <app-button type="submit" [fullWidth]="true" variant="accent" [disabled]="submissionInProgress()"
        [attr.aria-busy]="submissionInProgress()">
        @if (submissionInProgress()) {
        <span>{{ submittingLabel() }}</span>
        } @else {
        <span>{{ submitButtonLabel() }}</span>
        }
      </app-button>

      @if (errorMessage()) {
      <div class="auth__alert auth__alert--error" role="alert">
        <i class="fa-solid fa-triangle-exclamation" aria-hidden="true"></i>
        <span>{{ errorMessage() }}</span>
      </div>
      }
    </form>
  </div>
</section>
